import{_ as A,u as E,a as Q,s as S,r as U,c as q,o as G,b as r,d as t,w as u,e as H,v as I,f as _,n as p,F as v,g as y,h as a,i as C,t as c,j as f,k as N,l as V,m as J,p as i}from"./index-WuaywiV3.js";const K={class:"hero-gradient text-white py-16"},O={class:"container mx-auto px-4"},W={class:"flex"},X={class:"py-12 bg-white"},Y={class:"container mx-auto px-4"},Z={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4"},tt=["onClick"],et={class:"category-icon bg-pink-100 text-pink-500 mx-auto"},st={class:"font-medium"},at={class:"py-8 bg-gray-50"},nt={class:"container mx-auto px-4"},ot={class:"flex flex-col lg:flex-row gap-8"},rt={class:"lg:w-1/4"},it={class:"bg-white rounded-xl shadow-sm p-6 sticky top-24"},lt={class:"mb-6"},dt={class:"space-y-2"},ct=["id","value","checked","onChange"],ut=["for"],gt={class:"flex items-center mt-2"},pt=["checked"],xt={class:"mb-6"},ft={class:"space-y-2"},mt={class:"flex items-center"},vt=["checked"],yt={class:"flex items-center"},ht=["checked"],bt={class:"flex items-center"},kt=["checked"],wt={class:"flex items-center"},_t=["checked"],Ct={class:"lg:w-3/4"},Pt={class:"bg-white rounded-xl shadow-sm p-4 mb-6 flex flex-col sm:flex-row justify-between items-center"},$t={class:"mb-3 sm:mb-0"},Ft={class:"font-medium ml-1"},St={class:"flex items-center"},Nt=["value"],Vt={key:0,class:"text-center py-8"},jt={key:1},Tt={key:0,class:"text-center py-8"},Bt={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},Lt={class:"relative"},Rt=["src","alt"],Mt={class:"absolute top-2 right-2 bg-white/90 px-2 py-1 rounded-lg text-sm font-medium flex items-center shadow-sm"},Dt={key:0,class:"absolute top-2 left-2 bg-pink-500 text-white px-2 py-1 rounded-lg text-xs font-medium shadow-sm"},zt=["onClick"],At={class:"p-5"},Et={class:"text-sm text-pink-500 font-medium mb-1"},Qt={class:"text-lg font-bold mb-2"},Ut={class:"text-gray-500 text-sm flex items-center mb-2"},qt={class:"text-gray-500 text-sm flex items-center mb-2"},Gt={class:"text-gray-500 text-sm flex items-center mb-4"},Ht={key:2,class:"mt-12 flex justify-center"},It={class:"flex items-center space-x-1"},Jt={key:1,class:"px-3 py-1 text-gray-600"},Kt=["onClick"],Ot=["onClick"],Wt={key:3,class:"px-3 py-1 text-gray-600"},Xt={class:"py-16 bg-pink-500 text-white"},Yt={class:"container mx-auto px-4 text-center"},Zt={__name:"CatalogView",setup(te){const l=E(),j=Q(),{specialists:ee,categories:T,cities:B,isLoading:L,filters:g,pagination:n,filteredSpecialists:h}=S(l),{isLoggedIn:P}=S(j),w=U(""),b=q({get:()=>g.value.category||"all",set:o=>{l.updateFilters({category:o==="all"?"":o})}}),$=o=>{l.updateFilters({city:o})},k=o=>{l.updateFilters({rating:o})},R=o=>{l.updateFilters({sortBy:o})},M=()=>{l.resetFilters()},D=()=>{l.updateFilters({search:w.value})},x=o=>{l.setPage(o)},F=()=>{const o=n.value.currentPage,e=n.value.totalPages,m={before:[],after:[]},s=1;for(let d=o-s;d<o;d++)d>1&&m.before.push(d);for(let d=o+1;d<=o+s;d++)d<e&&m.after.push(d);return m},z=async o=>{if(!P.value){alert("Необходимо войти в систему, чтобы добавить специалиста в избранное");return}try{l.isFavorite(o)?await l.removeFromFavorites(o):await l.addToFavorites(o)}catch(e){console.error("Ошибка при работе с избранным:",e)}};return G(async()=>{try{await Promise.all([l.fetchCategories(),l.fetchCities()]),await l.fetchSpecialists(),P.value&&await l.fetchFavorites()}catch(o){console.error("Ошибка при загрузке данных каталога:",o)}}),(o,e)=>{const m=J("RouterLink");return i(),r(v,null,[t("section",K,[t("div",O,[e[14]||(e[14]=t("h1",{class:"text-4xl font-bold mb-4 text-center"},"Найдите идеальных специалистов для вашей свадьбы",-1)),e[15]||(e[15]=t("p",{class:"text-xl mb-8 text-center max-w-3xl mx-auto"},"Тысячи профессионалов с проверенными отзывами готовы сделать ваш день особенным",-1)),t("form",{onSubmit:u(D,["prevent"]),class:"max-w-4xl mx-auto bg-white rounded-full shadow-lg overflow-hidden"},[t("div",W,[H(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>w.value=s),type:"text",placeholder:"Введите имя или услугу...",class:"flex-grow px-6 py-4 text-gray-800 focus:outline-none"},null,512),[[I,w.value]]),e[13]||(e[13]=t("button",{type:"submit",class:"bg-pink-500 text-white px-6 py-4 hover:bg-pink-700 transition"},[t("i",{class:"fas fa-search mr-2"}),_(" Найти ")],-1))])],32)])]),t("section",X,[t("div",Y,[e[17]||(e[17]=t("h2",{class:"text-3xl font-bold mb-8 text-center"},"Категории специалистов",-1)),t("div",Z,[t("a",{onClick:e[1]||(e[1]=u(s=>b.value="all",["prevent"])),href:"#",class:p([{"active-category":b.value==="all"},"p-4 rounded-xl text-center transition hover:bg-pink-50"])},e[16]||(e[16]=[t("div",{class:"category-icon bg-pink-100 text-pink-500 mx-auto"},[t("i",{class:"fas fa-th"})],-1),t("span",{class:"font-medium"},"Все",-1)]),2),(i(!0),r(v,null,y(a(T),s=>(i(),r("a",{key:s.id,onClick:u(d=>b.value=s.id,["prevent"]),href:"#",class:p([{"active-category":b.value===s.id},"p-4 rounded-xl text-center transition hover:bg-pink-50"])},[t("div",et,[t("i",{class:p("fas "+s.icon)},null,2)]),t("span",st,c(s.name),1)],10,tt))),128))])])]),t("section",at,[t("div",nt,[t("div",ot,[t("div",rt,[t("div",it,[e[25]||(e[25]=t("h3",{class:"font-bold text-lg mb-4"},"Фильтры",-1)),t("div",lt,[e[19]||(e[19]=t("h4",{class:"font-medium mb-3 flex items-center justify-between"},[t("span",null,"Город"),t("i",{class:"fas fa-chevron-down text-sm"})],-1)),t("div",dt,[(i(!0),r(v,null,y(a(B),s=>(i(),r("div",{key:s.id,class:"flex items-center"},[t("input",{id:"city-"+s.id,type:"radio",name:"city",value:s.name,checked:a(g).city===s.name,onChange:d=>$(s.name),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,ct),t("label",{for:"city-"+s.id,class:"ml-2 text-gray-700"},c(s.name),9,ut)]))),128)),t("div",gt,[t("input",{id:"city-all",type:"radio",name:"city",value:"",checked:!a(g).city,onChange:e[2]||(e[2]=s=>$("")),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,pt),e[18]||(e[18]=t("label",{for:"city-all",class:"ml-2 text-gray-700"},"Все города",-1))])])]),t("div",xt,[e[24]||(e[24]=t("h4",{class:"flex justify-between items-center cursor-pointer"},[t("span",null,"Рейтинг"),t("i",{class:"fas fa-chevron-down text-sm"})],-1)),t("div",ft,[t("div",mt,[t("input",{id:"rating-5",type:"radio",name:"rating",value:"5",checked:Number(a(g).rating)===5,onChange:e[3]||(e[3]=s=>k(5)),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,vt),e[20]||(e[20]=C('<label for="rating-5" class="ml-2 text-gray-700 flex items-center" data-v-827735e8><span class="rating-stars flex mr-1" data-v-827735e8><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i></span> и выше </label>',1))]),t("div",yt,[t("input",{id:"rating-4",type:"radio",name:"rating",value:"4",checked:Number(a(g).rating)===4,onChange:e[4]||(e[4]=s=>k(4)),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,ht),e[21]||(e[21]=C('<label for="rating-4" class="ml-2 text-gray-700 flex items-center" data-v-827735e8><span class="rating-stars flex mr-1" data-v-827735e8><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i></span> и выше </label>',1))]),t("div",bt,[t("input",{id:"rating-3",type:"radio",name:"rating",value:"3",checked:Number(a(g).rating)===3,onChange:e[5]||(e[5]=s=>k(3)),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,kt),e[22]||(e[22]=C('<label for="rating-3" class="ml-2 text-gray-700 flex items-center" data-v-827735e8><span class="rating-stars flex mr-1" data-v-827735e8><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i><i class="fas fa-star" data-v-827735e8></i></span> и выше </label>',1))]),t("div",wt,[t("input",{id:"rating-0",type:"radio",name:"rating",value:"0",checked:Number(a(g).rating)===0,onChange:e[6]||(e[6]=s=>k(0)),class:"text-pink-500 focus:ring-pink-500 h-4 w-4"},null,40,_t),e[23]||(e[23]=t("label",{for:"rating-0",class:"ml-2 text-gray-700"},"Все рейтинги",-1))])])]),t("button",{onClick:M,class:"w-full py-2 px-4 border border-pink-500 text-pink-500 rounded-lg hover:bg-pink-50 transition font-medium"}," Сбросить фильтры ")])]),t("div",Ct,[t("div",Pt,[t("div",$t,[e[26]||(e[26]=t("span",{class:"text-gray-600"},"Найдено:",-1)),t("span",Ft,c(a(h).length)+" специалистов",1)]),t("div",St,[e[28]||(e[28]=t("span",{class:"text-gray-600 mr-2"},"Сортировать:",-1)),t("select",{value:a(g).sortBy||"rating",onChange:e[7]||(e[7]=s=>R(s.target.value)),class:"border rounded-lg px-3 py-1 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500"},e[27]||(e[27]=[t("option",{value:"rating"},"По рейтингу",-1),t("option",{value:"reviews"},"По количеству отзывов",-1),t("option",{value:"price_asc"},"Сначала недорогие",-1),t("option",{value:"price_desc"},"Сначала дорогие",-1)]),40,Nt)])]),a(L)?(i(),r("div",Vt,e[29]||(e[29]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Загрузка специалистов...",-1)]))):(i(),r("div",jt,[a(h).length===0?(i(),r("div",Tt,e[30]||(e[30]=[t("i",{class:"fas fa-search text-5xl text-gray-400 mb-4"},null,-1),t("p",{class:"text-xl text-gray-600"},"По вашему запросу ничего не найдено",-1),t("p",{class:"text-gray-500 mt-2"},"Попробуйте изменить параметры поиска",-1)]))):(i(),r("div",Bt,[(i(!0),r(v,null,y(a(h),s=>(i(),r("div",{key:s.id,class:"bg-white rounded-xl shadow-sm overflow-hidden transition hover:shadow-md card-hover"},[t("div",Lt,[t("img",{src:s.image,alt:s.name,class:"w-full h-48 object-cover"},null,8,Rt),t("div",Mt,[e[31]||(e[31]=t("i",{class:"fas fa-star text-yellow-400 mr-1"},null,-1)),t("span",null,c(s.rating)+"/5",1)]),s.featured?(i(),r("div",Dt," ТОП специалист ")):f("",!0),t("button",{onClick:d=>z(s.id),class:"absolute bottom-2 right-2 w-10 h-10 rounded-full bg-white shadow-md flex items-center justify-center transition hover:bg-pink-50"},[t("i",{class:p(["fas fa-heart",a(l).isFavorite(s.id)?"text-pink-500":"text-gray-400"])},null,2)],8,zt)]),t("div",At,[t("div",Et,c(s.categoryName),1),t("h3",Qt,c(s.name),1),t("div",Ut,[e[32]||(e[32]=t("i",{class:"fas fa-map-marker-alt mr-1"},null,-1)),t("span",null,c(s.city),1)]),t("div",qt,[e[33]||(e[33]=t("i",{class:"fas fa-comment mr-1"},null,-1)),t("span",null,c(s.reviewsCount)+" отзывов",1)]),t("div",Gt,[e[34]||(e[34]=t("i",{class:"fas fa-money-bill-alt mr-1"},null,-1)),t("span",null,c(s.priceRange),1)]),N(m,{to:`/catalog/specialist/${s.id}`,class:"text-pink-500 font-medium hover:text-pink-600 flex items-center"},{default:V(()=>e[35]||(e[35]=[_(" Подробнее "),t("i",{class:"fas fa-chevron-right ml-1 text-xs"},null,-1)])),_:2,__:[35]},1032,["to"])])]))),128))])),a(h).length>0&&a(n).totalPages>1?(i(),r("div",Ht,[t("nav",It,[t("a",{onClick:e[8]||(e[8]=u(s=>a(n).currentPage>1&&x(a(n).currentPage-1),["prevent"])),href:"#",class:p(["px-3 py-1 rounded-md",a(n).currentPage>1?"bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},e[36]||(e[36]=[t("i",{class:"fas fa-chevron-left text-xs"},null,-1)]),2),a(n).totalPages>0?(i(),r("a",{key:0,onClick:e[9]||(e[9]=u(s=>x(1),["prevent"])),href:"#",class:p(["px-3 py-1 rounded-md",a(n).currentPage===1?"bg-pink-500 text-white":"bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500"])}," 1 ",2)):f("",!0),a(n).currentPage>3?(i(),r("span",Jt,"...")):f("",!0),(i(!0),r(v,null,y(F().before,s=>(i(),r("a",{key:`before-${s}`,onClick:u(d=>x(s),["prevent"]),href:"#",class:"px-3 py-1 rounded-md bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500"},c(s),9,Kt))),128)),a(n).currentPage!==1&&a(n).currentPage!==a(n).totalPages?(i(),r("a",{key:2,onClick:e[10]||(e[10]=u(s=>x(a(n).currentPage),["prevent"])),href:"#",class:"px-3 py-1 rounded-md bg-pink-500 text-white"},c(a(n).currentPage),1)):f("",!0),(i(!0),r(v,null,y(F().after,s=>(i(),r("a",{key:`after-${s}`,onClick:u(d=>x(s),["prevent"]),href:"#",class:"px-3 py-1 rounded-md bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500"},c(s),9,Ot))),128)),a(n).currentPage<a(n).totalPages-2?(i(),r("span",Wt,"...")):f("",!0),a(n).totalPages>1?(i(),r("a",{key:4,onClick:e[11]||(e[11]=u(s=>x(a(n).totalPages),["prevent"])),href:"#",class:p(["px-3 py-1 rounded-md",a(n).currentPage===a(n).totalPages?"bg-pink-500 text-white":"bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500"])},c(a(n).totalPages),3)):f("",!0),t("a",{onClick:e[12]||(e[12]=u(s=>a(n).currentPage<a(n).totalPages&&x(a(n).currentPage+1),["prevent"])),href:"#",class:p(["px-3 py-1 rounded-md",a(n).currentPage<a(n).totalPages?"bg-gray-100 text-gray-700 hover:bg-pink-50 hover:text-pink-500 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},e[37]||(e[37]=[t("i",{class:"fas fa-chevron-right text-xs"},null,-1)]),2)])])):f("",!0)]))])])])]),t("section",Xt,[t("div",Yt,[e[39]||(e[39]=t("h2",{class:"text-3xl font-bold mb-4"},"Вы профессионал свадебной индустрии?",-1)),e[40]||(e[40]=t("p",{class:"text-lg mb-8 max-w-2xl mx-auto"},"Присоединяйтесь к нашему сервису и получайте заказы от пар, которые планируют свадьбу.",-1)),N(m,{to:"/register",class:"inline-block bg-white text-pink-500 font-medium px-8 py-3 rounded-full hover:bg-gray-100 hover:shadow-lg transition"},{default:V(()=>e[38]||(e[38]=[_(" Стать специалистом ")])),_:1,__:[38]})])])],64)}}},ae=A(Zt,[["__scopeId","data-v-827735e8"]]);export{ae as default};
